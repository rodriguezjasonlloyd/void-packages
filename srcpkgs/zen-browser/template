# Template file for 'zen-browser'
pkgname=zen-browser
version=1.17.15b
revision=1
short_desc="Firefox-based browser"
maintainer="jason <rodriguezjasonlloyd@gmail.com>"
license="MPL-2.0"
homepage="https://www.zen-browser.app"
distfiles="https://github.com/zen-browser/desktop/releases/download/${version}/zen.linux-x86_64.tar.xz"
checksum=13ef9d59e25c61b0af9b182f89ad1a5b08eb197d9e61668f145d752dda378778

do_install() {
	vmkdir usr/share/pixmaps
	vinstall browser/chrome/icons/default/default48.png 644 /usr/share/pixmaps zen.png

	for size in 16 32 48 64 128; do
		vmkdir usr/share/icons/hicolor/${size}x${size}/apps
		vinstall browser/chrome/icons/default/default${size}.png 644 /usr/share/icons/hicolor/${size}x${size}/apps zen.png
	done

	vmkdir usr/share/applications
	vcopy ${FILESDIR}/zen.desktop /usr/share/applications

	vmkdir usr/lib/${pkgname}
	vcopy * usr/lib/${pkgname}

	ln -Ts /usr/share/hunspell $DESTDIR/usr/lib/${pkgname}/dictionaries
	ln -Ts /usr/share/hyphen $DESTDIR/usr/lib/${pkgname}/hyphenation
	ln -sf /usr/lib/libnssckbi.so $DESTDIR/usr/lib/${pkgname}/libnssckbi.so

	vmkdir usr/lib/${pkgname}/distribution
	vinstall ${FILESDIR}/policies.json 644 /usr/lib/${pkgname}/distribution

	vmkdir usr/bin
	ln -sfr $DESTDIR/usr/lib/${pkgname}/zen $DESTDIR/usr/bin/zen
}

post_install() {
	vlicense ${FILESDIR}/LICENSE
}
